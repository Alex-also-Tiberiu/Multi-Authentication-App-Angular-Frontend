<div class="login-container">
  <div class="login-card">
    <h1>Accedi</h1>
    
    @if (errorMessage()) {
      <div class="alert alert-error">
        {{ errorMessage() }}
      </div>
    }

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="username">Username</label>
        <input
          id="username"
          type="text"
          formControlName="username"
          placeholder="Inserisci il tuo username"
          [attr.aria-invalid]="isFieldInvalid('username')"
          [attr.aria-describedby]="isFieldInvalid('username') ? 'username-error' : null"
          [disabled]="authService.isLoading()"
        />
        @if (isFieldInvalid('username')) {
          <span id="username-error" class="error-text">
            Username è obbligatorio
          </span>
        }
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input
          id="password"
          type="password"
          formControlName="password"
          placeholder="Inserisci la tua password"
          [attr.aria-invalid]="isFieldInvalid('password')"
          [attr.aria-describedby]="isFieldInvalid('password') ? 'password-error' : null"
          [disabled]="authService.isLoading()"
        />
        @if (isFieldInvalid('password')) {
          <span id="password-error" class="error-text">
            Password è obbligatoria
          </span>
        }
      </div>

      <button
        type="submit"
        [disabled]="!loginForm.valid || authService.isLoading()"
        class="btn btn-primary"
      >
        @if (authService.isLoading()) {
          <span>Accesso in corso...</span>
        } @else {
          <span>Accedi</span>
        }
      </button>

      <button
        type="button"
        (click)="goToRegister()"
        class="btn btn-secondary"
      >
        Registrati
      </button>
    </form>
  </div>
</div>
